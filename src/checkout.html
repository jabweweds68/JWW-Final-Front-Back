<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - JWW</title>
  <link rel="icon" type="image/png" href="./assets/images/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="./assets/images/favicon.svg" />
  <link rel="shortcut icon" href="./assets/images/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/images/apple-touch-icon.png" />
  <link rel="manifest" href="./assets/images/site.webmanifest" />


  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="/path-to-font.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Mallanna&family=Raleway:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/@splidejs/splide-extension-auto-scroll@0.5.3/dist/js/splide-extension-auto-scroll.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css" rel="stylesheet">
  
  <!-- EmailJS Library -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

  <style>
    .field-error {
      color: #ff4444;
      font-size: 12px;
      margin-top: 4px;
      display: block;
      font-weight: 500;
    }

    input.error {
      border-color: #ff4444 !important;
      box-shadow: 0 0 5px rgba(255, 68, 68, 0.3) !important;
      background-color: rgba(255, 68, 68, 0.05) !important;
    }

    .empty-cart {
      text-align: center;
      padding: 40px 20px;
      color: #666;
      font-size: 16px;
    }

    .empty-cart a {
      color: #333;
      text-decoration: underline;
      font-weight: bold;
    }

    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      color: white;
      font-size: 18px;
    }

    .loading-content {
      text-align: center;
      padding: 30px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
    }

    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    @media (max-width: 768px) {
      .field-error {
        font-size: 11px;
      }

      .empty-cart {
        padding: 20px 10px;
        font-size: 14px;
      }
    }
  </style>


<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window,document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
 fbq('init', '793268460233772'); 
fbq('track', 'PageView');
fbq('track', 'InitiateCheckout');
fbq('track', 'AddPaymentInfo');
fbq('track', 'ViewContent');
fbq('track', 'Purchase', {value: 0.00, currency: 'PKR'});

</script>
<!-- End Meta Pixel Code -->


</head>

<body>
  <noscript>
 <img height="1" width="1" 
src="https://www.facebook.com/tr?id=793268460233772&ev=PageView
&noscript=1"/>
</noscript>
   <div class="splide ">
    <div class="splide__track splide__track-2  splide-height-manage ">
      <ul class="splide__list">
        <li class="splide__slide">üí¶</li>
        <li class="splide__slide">DISCRETE DELIVERY</li>

        <li class="splide__slide">üî•</li>
        <li class="splide__slide">BOOK YOUR CHOCOLATE NOW</li>

        <li class="splide__slide">üí¶</li>
        <li class="splide__slide">2-5 DAYS FAST DELIVERY</li>
        <li class="splide__slide">üëÖ</li>
        <li class="splide__slide">FOR MARRIED COUPLES ONLY</li>

        <li class="splide__slide">üç´</li>
        <li class="splide__slide">2-5 DAYS FAST DELIVERY</li>
        <li class="splide__slide">üî•</li>
        <li class="splide__slide">BOOK YOUR CHOCOLATE NOW</li>
          <li class="splide__slide">üëÖ</li>
            <li class="splide__slide">FOR MARRIED COUPLES ONLY</li>
      </ul>
    </div>
  </div>
<div class="slide-bar">
    <div class="menu-2">
      <a href="./index.html">HOME</a>
      <a href="./About.html">About</a>
      <a href="./contact.html">CONTACT</a>
    </div>
    <div class="close-btn">CLOSE</div>
    <div class="upper-picture-menu">
      <div class="grid-box-container">
        <div class="box">
          <div class="elents"><img src="./assets/images/el-1.png" alt=""></div>
          <div class="elents"><img src="./assets/images/marq-2.png" alt=""></div>
          <div class="elents"><img src="./assets/images/el-2.png" alt=""></div>
          <div class="name-box">DARK DESIRE</div>
          <div class="choco-menu"><img src="./assets/images/Dark Desire Regular.png" alt=""></div>
        </div>
        <div class="box straw-bg">
          <div class="elents"><img src="./assets/images/el-1.png" alt=""></div>
          <div class="elents"><img src="./assets/images/marq-2.png" alt=""></div>
          <div class="elents"><img src="./assets/images/el-2.png" alt=""></div>
          <div class="name-box">STRAWBAE</div>
          <div class="choco-menu"><img src="./assets/images/Strawbae Regular.png" alt=""></div>
        </div>
        <div class="box">
          <div class="elents"><img src="./assets/images/el-3.png" alt=""></div>
          <div class="elents"><img src="./assets/images/marq-1.png" alt=""></div>
          <div class="elents"><img src="./assets/images/el-2.png" alt=""></div>
          <div class="name-box">VANILLALUST</div>
          <div class="choco-menu"><img src="./assets/images/Vanillust Regular.png" alt=""></div>
        </div>
        <div class="box">
          <div class="elents"><img src="./assets/images/el-3.png" alt=""></div>
          <div class="elents"><img src="./assets/images/marq-1.png" alt=""></div>
          <div class="elents"><img src="./assets/images/el-2.png" alt=""></div>
          <div class="name-box">BUNDLE</div>
          <div class="choco-menu bundle-c"><img src="./assets/images/bundle.png" alt=""></div>
        </div>

      </div>
    </div>
  </div>

  <nav>
    <div class="since">since 2025</div>
    <div class="line-bar"></div>
  <a href="./index.html" class="logo">
      <img src="./assets/images/spl-removebg-preview 1.png" alt="">
    </a>
    <div class="line-bar"></div>
    <div class="menu">MENU</div>
  </nav>

  <div class="checkout-page-hero">
    <div class="left-side-checkout-foam">
      <div class="heading-f">
        <h1>CHECKOUT</h1>
        <p>Personal Details</p>
      </div>
      <div class="form-container">
        <form id="checkout-form">
          <div class="form-contact-mail">
            <input type="email" id="email" placeholder="Email Address" required>
            <input type="tel" id="phone" placeholder="Phone Number" required>

            <label class="check-box">
              <input type="checkbox" id="order-updates">
              <span class="custom-checkbox"></span>
              <p>I want to receive order confirmation and shipping updates via email.</p>
            </label>
          </div>
          <div class="delivery">
            <h1>General</h1>
            <div class="first-row-form">
              <input type="text" id="first-name" placeholder="First name" required>
              <input type="text" id="last-name" placeholder="Last name" required>
            </div>
            <div class="first-row-form">
              <input type="text" id="address" placeholder="Address" required>
            </div>
            <div class="first-row-form">
              <input type="text" id="apartment" placeholder="Apartment, suite, etc (optional)">
            </div>
            <div class="first-row-form">
              <input type="text" id="city" placeholder="City" required>
              <input type="text" id="postal-code" placeholder="Postal Code">
            </div>

            <label class="check-box">
              <input type="checkbox" id="marketing-updates">
              <span class="custom-checkbox"></span>
              <p>I want to receive exclusive offers and updates</p>
            </label>
            <h1>Payment Method</h1>
            <label class="check-box">
              <input type="checkbox" id="save-info">
              <span class="custom-checkbox"></span>
              <p>Cash On Delivery</p>
            </label>
          </div>
        </form>
      </div>
      <div class="sub-totals-product" id="checkout-totals">
        <div class="products-total-p">
          <span>Products : </span>
          <span id="checkout-products-total">0</span>
        </div>
        <div class="delivery-charges">
          <span>Delivery Charges</span>
          <span>250</span>
        </div>
        <div class="subtotal">
          <span>Subtotal</span>
          <span id="checkout-subtotal">Free Delivery</span>
        </div>
        <div class="cta-check">
          <div class="cta checkout thankyou-page-navigate" id="place-order-btn">Place Order</div>
        </div>
      </div>
    </div>
    <div class="right-order-stick">
      <div class="heading-f">
        <h1>Your Order</h1>
      </div>
      <div class="outer-scrol">
        <div class="orders-section" id="checkout-cart-items">
          <!-- Cart items will be dynamically loaded here -->
        </div>
      </div>
    </div>
  </div>

  <div class="splide">
    <div class="splide__track splide__track-3">
      <ul class="splide__list">
        <li class="splide__slide">A treat that sets the mood.</li>
        <li class="splide__slide"><img src="./assets/images/marq-2.png" alt=""></li>
        <li class="splide__slide">For couples who like a little tease</li>
        <li class="splide__slide"><img src="./assets/images/marq-3.png" alt=""></li>
        <li class="splide__slide">The sweetest excuse to stay in</li>
        <li class="splide__slide"><img src="./assets/images/marq-1.png" alt=""></li>
      </ul>
    </div>
  </div>

  <footer>
  <div class="section-main-footer">
      <div class="side-left-logo">
        <div class="logo-footer">
          <img src="./assets/images/footer-logo.png" alt="">
        </div>
        <div class="para-footer">
          Pakistan's 1st Premium Herbal Seggs Chocolate Brand üç´<br>
          <p> Herbal, Fast & Intense: Made for unstoppable cravings </p>
          üí¶
        </div>
        <div class="cta-footer">
          <div class="cta" id="product-page">Get dirty now</div>
        </div>
      </div>
      <div class="menu-links-footer">
        <ul>
          <li>
            <h1>LINKS</h1>
          </li>
          <li><a href="./index.html">HOME</a></li>
          <li><a href="./About.html">ABOUT</a></li>
          <li><a href="./contact.html">CONTACT</a></li>
        </ul>

        <ul>
          <li>
            <h1>SOCIAL MEDIA</h1>
          </li>
          <li><a href="https://www.instagram.com/jabweweds/" target="_blank">INSTAGRAM</a></li>
          <li><a href="https://www.facebook.com/share/1BHEh4A6wU/" target="_blank">FACEBOOK</a></li>
          <li><a href="https://x.com/JabWeWeds?t=Icz5FqbLT_86aVEqnzplqQ&s=09" target="_blank">X</a></li>
          <li><a href="https://wa.me/9203390117465" target="_blank">WHATSAPP</a></li>
        </ul>
      </div>

    </div>
  
    <div class="privacy-policy">
  
    </div>
    <div class="splide">
      <div class="splide__track splide__track-1  ">
        <ul class="splide__list ">
          <li class="splide__slide slide-footer">Because chocolate should come with a wink.</li>

          <li class="splide__slide"><img src="./assets/images/marq-2.png" alt=""></li>
          <li class="splide__slide  slide-footer">Unwrap me first</li>

          <li class="splide__slide"><img src="./assets/images/marq-3.png" alt=""></li>
          <li class="splide__slide  slide-footer">Not your average ‚Äúafter dinner.‚Äù</li>

          <li class="splide__slide"><img src="./assets/images/marq-1.png" alt=""></li>
        </ul>
      </div>
    </div>
  </footer>

  <script>
  const CONFIG = {


    // BACKEND_URL: 'http://localhost:8000'
    BACKEND_URL: 'https://jww-backend-main-production.up.railway.app'
  };
</script>

  <!-- Only load the JS module - all logic is there -->
  <script type="module" src="./js/cart-manager.js"></script>
  <script type="module" src="./js/checkout-page.js"></script>
  <script>
  const productPageLinks = document.querySelectorAll("#product-page");

  productPageLinks.forEach(element => {
    element.style.cursor = "pointer";
    element.addEventListener("click", () => {
      window.location.href = "./product-page.html";
    });
  });

  // Configuration
  const PRODUCT_MAPPING = {
    'DARK DESIRE': 'dark-desire',
    'STRAWBAE': 'strawbae',
    'VANILLALUST': 'vanillalust',
    'BUNDLE': 'bundle'
  };

  // Function to handle menu product clicks
  function setupMenuProductNavigation() {
    const staticMenuBoxes = document.querySelectorAll('.slide-bar .box');

    staticMenuBoxes.forEach(box => {
      const productName = box.querySelector('.name-box')?.textContent;

      if (productName && PRODUCT_MAPPING[productName]) {
        box.removeAttribute('id');
        box.classList.add('menu-product-item');
        box.style.cursor = 'pointer';

        box.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();

          const productSlug = PRODUCT_MAPPING[productName];
          navigateToProduct(productSlug, productName);
        });
      }
    });
  }

  function navigateToProduct(productSlug, productName) {
    const url = `./product-page.html?product=${encodeURIComponent(productSlug)}&name=${encodeURIComponent(productName)}`;
    window.location.href = url;
  }

  async function updateMenuWithAPIProducts() {
    try {
      const response = await fetch(`${CONFIG.BACKEND_URL}/GetAllProducts`);
      const data = await response.json();

      if (data.success && data.products) {
        updateDynamicMenu(data.products);
      }
    } catch (error) {
      console.error('Error fetching products for menu:', error);
    }
  }

  function updateDynamicMenu(products) {
    const menuContainer = document.querySelector('.slide-bar .grid-box-container');
    if (!menuContainer) return;

    menuContainer.innerHTML = products.map(product => {
      const categoryClass = getCategoryClass(product.category);

      return `
            <div class="box ${categoryClass}" data-product-id="${product._id}">
                <div class="elents"><img src="./assets/images/el-1.png" alt=""></div>
                <div class="elents"><img src="./assets/images/marq-2.png" alt=""></div>
                <div class="elents"><img src="./assets/images/el-2.png" alt=""></div>
                <div class="name-box">${product.title.toUpperCase()}</div>
                <div class="choco-menu">
                    <img src="${getImageUrl(product.images[0])}" alt="${product.title}">
                </div>
            </div>
        `;
    }).join('');

    setupDynamicMenuNavigation(products);
  }

  function setupDynamicMenuNavigation(products) {
    const menuBoxes = document.querySelectorAll('.slide-bar .box[data-product-id]');

    menuBoxes.forEach(box => {
      box.style.cursor = 'pointer';
      box.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();

        const productId = box.dataset.productId;
        const product = products.find(p => p._id === productId);

        if (product) {
          const productSlug = product.title.toLowerCase().replace(/\s+/g, '-');
          navigateToProductById(productId, product.title, productSlug);
        }
      });
    });
  }

  function navigateToProductById(productId, productName, productSlug) {
    const url = `./product-page.html?productId=${encodeURIComponent(productId)}&name=${encodeURIComponent(productName)}&product=${encodeURIComponent(productSlug)}`;
    window.location.href = url;
  }

  function getCategoryClass(category) {
    switch (category?.toLowerCase()) {
      case 'strawberry flavour':
        return 'straw-bg';
      case 'dark desire':
        return '';
      case 'vanilla lust':
        return 'vanilla-bg';
      default:
        return '';
    }
  }

  
  // Make sure getImageUrl is properly defined
function getImageUrl(image) {
    if (!image) return './assets/images/ABout-pic.png';
    
    const imageUrl = typeof image === 'string' ? image : image.url;
    
    if (!imageUrl) return './assets/images/ABout-pic.png';
    
    // If URL already starts with http, use as-is
    if (imageUrl.startsWith('http://') || imageUrl.startsWith('https://')) {
        return imageUrl;
    }
    
    // If it's a local asset, use as-is
    if (imageUrl.startsWith('./assets')) {
        return imageUrl;
    }
    
    // Otherwise, prepend backend URL
    return `${CONFIG.BACKEND_URL}${imageUrl}`;
}
  document.addEventListener('DOMContentLoaded', () => {
    setupMenuProductNavigation();
    updateMenuWithAPIProducts();

    const otherProductLinks = document.querySelectorAll("#product-page:not(.slide-bar .box)");
    otherProductLinks.forEach(element => {
      element.style.cursor = "pointer";
      element.addEventListener("click", () => {
        window.location.href = "./product-page.html";
      });
    });
  });
</script>
</body>

</html>
<!-- <script type="module" src="./js/cart-manager.js"></script>
<script type="module" src="./js/checkout-page.js"></script> -->